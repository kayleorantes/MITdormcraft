# Design Notes: User Concept

## Core Design Rationale

This concept is entirely new, replacing any previous user-related ideas from the original project. It was designed as part of a pivot to a new application, MITdormcraft, and its structure is based on the key modularity requirement of separating identity from authentication.

This concept's sole purpose is to be the single source of truth for a user's public-facing profile data. It intentionally knows nothing about passwords, sessions, or how the account was created.



## Separation of Concerns: User vs. Authentication

The most important design decision was to split user management into two concepts:

1.  `User` (This Concept): Manages the profile—data that other users might see or that the user themselves can change (like their `bio` or `username`). It's the "what" of a user.
2.  `Authentication` (New Concept): Manages the identity—data that proves *who* a user is (like `mitKerberos`, passwords, or session tokens). It handles `register`, `login`, and is the only concept that can create a new `User` record.

Rationale: This separation is critical for both security and modularity. The `User` concept can be safely queried by other concepts (like `DesignPost`) to get an author's name, without ever exposing sensitive credential information.



## Design Decisions: State

* `userID` (Primary Key): The `User`'s unique ID, generated by the `Authentication` concept. This is the simple `String` ID that will be stored in `DesignPost`'s `authorID` field or `Engagement`'s `authorID` fields.
* `username`: The unique, public-facing name for a user. This is distinct from their Kerberos to allow for more creative or anonymous-but-still-unique handles.
* `mitKerberos`: Stored here as a unique, internal identifier. This links the profile to the verifiable credential in the `Authentication` concept.
* `bio`: The user's public-facing profile text. This is the primary field that the user is allowed to modify.
* `createdAt`: A standard timestamp added to know when the account was created, useful for profile display ("Member Since...") and internal analytics.



## Design Decisions: Actions

* `getUser(userID)` / `getUserByUsername(username)`: Provides two essential read-only methods to fetch a user's public profile data. This is what other services or the frontend will use to display author information.
* `updateUserProfile(userID, bio)`: This is the only write action in this concept. It is intentionally limited to non-critical profile data (`bio`). Changes to core identity fields like `username` or `mitKerberos` are complex and intentionally omitted from this concept to maintain stability.
* Omission of `createUser`: The `createUser` action is deliberately absent. Account creation is a high-security operation handled exclusively by the `Authentication` concept's `registerAndCreateAccount` action. This ensures a `User` profile can never be created without a corresponding valid credential.